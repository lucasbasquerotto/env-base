name: "test ({{ params.name }})"
ctxs: "{{ params.ctxs }}"
container: ""
main:
  cloud_hooks:
    repo: "cloud"
    env_repos:
      - repo: "custom_cloud"
        dir: "custom-cloud"
    clouds:
      - "local"
    params:
      x_custom_roles:
        - "role1"
        - "role2"
      x_custom_tasks:
        - "task1"
        - "task2"
    group_params:
      hooks: "test_hooks"
      custom_roles: "test_custom_roles"
      custom_tasks: "test_custom_tasks"
    shared_params: ["local"]
    shared_group_params: "test_shared_group_params"
  cloud_services:
    repo: "cloud"
    env_repos:
      - repo: "custom_cloud"
        dir: "custom-cloud"
    destroy:
      initial_services: true
      final_services: true
    initial_services:
      - "test_list_1"
      - name: "test_service_1_initial"
        key: "test_service_1"
        tmp: true
        params:
          param1: "value_overriden_1_1"
        group_params:
          param1: "overriden_group_1_1"
          param2: "overriden_group_1_2"
        shared_params: ["overriden_s1"]
        shared_group_params: "overriden_g1"
      - name: "test_service_2_initial"
        key: "test_service_2"
        params:
          param1: "value_overriden_2_1"
        group_params:
          param1: "overriden_group_2_1"
          param2: "overriden_group_2_2"
        shared_params: ["overriden_s2"]
        shared_group_params: "overriden_g2"
    final_services:
      - "test_service_3"
      - name: "test_service_1_final"
        key: "test_service_1"
        tmp: true
        params:
          param1: "value_overriden_1_1"
        group_params:
          param1: "overriden_group_1_1"
          param2: "overriden_group_1_2"
        shared_params: ["overriden_s1"]
        shared_group_params: "overriden_g1"
      - name: "test_list_2_final"
        key: "test_list_2"
        tmp: true
    shared_params: ["local"]
  cloud_custom_tasks:
    repo: "cloud"
    env_repos:
      - repo: "custom_cloud"
        dir: "custom-cloud"
    clouds:
      - "custom"
    dns:
      - name: "custom"
        dns_type: "NS"
        record: "dev"
        data_list:
          - value: "ns1dev.test.com"
          - value: "ns2dev.test.com"
      - name: "custom"
        dns_type: "A"
        record: "dev"
        data_list:
          - value: "1.2.3.4"
    nodes:
      - "custom"
      - "custom_local"
    run_stages:
      - tasks:
          - name: "custom"
            nodes: ["custom_local"]
            nodes_tasks: true
    group_params:
      custom_tasks: "main_custom_tasks"
    shared_params: ["local"]
  repos:
    repo: "cloud"
    extra_repos:
      - repo: "env_base"
        dir: "env-base"
        links:
          - src: ""
            dest: "tmp/test/link-env-base"
          - repo: "custom_cloud"
            src: ""
            dest: "tmp/test/link-custom-cloud"
          - repo: "pod"
            src: "run"
            dest: "tmp/test/link-pod-run.sh"
        env_files:
          - src: "{{ params.env.repo_dir }}/test/extra-repos/file1.yml"
            dest: "tmp/test/ef1.yml"
        env_templates:
          - src: "{{ params.env.repo_dir }}/test/extra-repos/template1.yml"
            dest: "tmp/test/etpl1.yml"
            params:
              value1: "env_base_1_1"
              value2: "env_base_1_2"
          - src: "{{ params.env.repo_dir }}/test/extra-repos/template2.yml"
            dest: "tmp/test/etpl2.yml"
            params:
              value1: "env_base_2_1"
              value2: "env_base_2_2"
        files:
          - src: "test/extra-repos/repo_file1.yml"
            dest: "tmp/test/f1.yml"
          - src: "test/extra-repos/repo_file2.yml"
            dest: "tmp/test/f2.yml"
        templates:
          - src: "test/extra-repos/repo_template1.yml"
            dest: "tmp/test/tpl1.yml"
            params:
              value1: "env_base_1_1 (repo)"
              value2: "env_base_1_2 (repo)"
              value3: "env_base_1_3 (repo)"
          - src: "test/extra-repos/repo_template2.yml"
            dest: "tmp/test/tpl2.yml"
            params:
              value1: "env_base_2_1 (repo)"
              value2: "env_base_2_2 (repo)"
              value3: "env_base_2_3 (repo)"
      - repo: "custom_cloud"
        dir: "custom-cloud"
        links:
          - src: ""
            dest: "tmp/test/link-custom-cloud"
          - repo: "pod"
            src: "run"
            dest: "tmp/test/link-pod-run.sh"
        env_files:
          - src: "{{ params.env.repo_dir }}/test/extra-repos/file2.yml"
            dest: "tmp/test/ef2.yml"
        env_templates:
          - src: "{{ params.env.repo_dir }}/test/extra-repos/template1.yml"
            dest: "tmp/test/etpl1.yml"
            params:
              value1: "custom_cloud_1"
              value2: "custom_cloud_2"
        files:
          - src: "test/extra-repos/cloud_file1.yml"
            dest: "tmp/test/cf1.yml"
          - src: "test/extra-repos/cloud_file2.yml"
            dest: "tmp/test/cf2.yml"
        templates:
          - src: "test/extra-repos/cloud_template1.yml"
            dest: "tmp/test/ct1.yml"
            params:
              value1: "custom_cloud_1_1 (repo)"
              value2: "custom_cloud_1_2 (repo)"
          - src: "test/extra-repos/cloud_template2.yml"
            dest: "tmp/test/ct2.yml"
            params:
              value1: "custom_cloud_2_1 (repo)"
              value2: "custom_cloud_2_2 (repo)"
      - repo: "pod"
        dir: "pod"
        links:
          - repo: "env_base"
            src: ""
            dest: "tmp/test/link-env-base"
        env_templates:
          - src: "{{ params.env.repo_dir }}/test/extra-repos/template2.yml"
            dest: "tmp/test/etpl2.yml"
            params:
              value1: "pod_1"
              value2: "pod_2"
      - repo: "custom_pod"
        dir: "custom-pod"
        links:
          - repo: "env_base"
            src: "common/test.yml"
            dest: "tmp/test/link-env-base-test.yml"
          - repo: "env_base"
            src: "test/extra-repos/file1.yml"
            dest: "tmp/test/link-env-base-file.yml"
        env_files:
          - src: "{{ params.env.repo_dir }}/test/extra-repos/file1.yml"
            dest: "tmp/test/ef1.yml"
          - src: "{{ params.env.repo_dir }}/test/extra-repos/file2.yml"
            dest: "tmp/test/ef2.yml"
    shared_params: ["local"]
main_shared_params:
  local:
    hosts_content: |
      [main]
      localhost ansible_connection=local
      [host:children]
      custom
      custom_local
      [custom]
      [custom_local]
    meta:
      template_no_empty_lines: true
main_shared_group_params:
  test_shared_group_params:
    prop1: "test_custom_roles"
    prop2: "test_custom_tasks"
main_params:
  test_custom_roles:
    role1: "custom-cloud/test/roles/role1"
    role2: "custom-cloud/test/roles/role2"
  test_custom_tasks:
    task1: "custom-cloud/test/tasks/task1.yml"
    task2: "custom-cloud/test/tasks/task2.yml"
  main_custom_tasks:
    cloud: "custom-cloud/test/tasks/cloud.yml"
    dns: "custom-cloud/test/tasks/dns.yml"
    node: "custom-cloud/test/tasks/node.yml"
    run: "custom-cloud/test/tasks/run.yml"
  test_hooks:
    before_initial_services: "custom-cloud/test/hooks/before_initial_services.yml"
    after_initial_services: "custom-cloud/test/hooks/after_initial_services.yml"
    before_cloud_main: "custom-cloud/test/hooks/before_cloud_main.yml"
    after_cloud_main: "custom-cloud/test/hooks/after_cloud_main.yml"
    before_dns: "custom-cloud/test/hooks/before_dns.yml"
    after_dns: "custom-cloud/test/hooks/after_dns.yml"
    before_buckets: "custom-cloud/test/hooks/before_buckets.yml"
    after_buckets: "custom-cloud/test/hooks/after_buckets.yml"
    before_nodes: "custom-cloud/test/hooks/before_nodes.yml"
    after_nodes: "custom-cloud/test/hooks/after_nodes.yml"
    before_wait_nodes: "custom-cloud/test/hooks/before_wait_nodes.yml"
    after_wait_nodes: "custom-cloud/test/hooks/after_wait_nodes.yml"
    before_prepare: "custom-cloud/test/hooks/before_prepare.yml"
    after_prepare: "custom-cloud/test/hooks/after_prepare.yml"
    before_cron: "custom-cloud/test/hooks/before_cron.yml"
    after_cron: "custom-cloud/test/hooks/after_cron.yml"
    before_final_services: "custom-cloud/test/hooks/before_final_services.yml"
    after_final_services: "custom-cloud/test/hooks/after_final_services.yml"
    before_delete_tmp: "custom-cloud/test/hooks/before_delete_tmp.yml"
    after_delete_tmp: "custom-cloud/test/hooks/after_delete_tmp.yml"
    before_delete_main: "custom-cloud/test/hooks/before_delete_main.yml"
    after_delete_main: "custom-cloud/test/hooks/after_delete_main.yml"
services:
  test_service_1:
    base_dir: "custom-cloud"
    type: "test/services/01"
    credentials:
      service_credential_1: "my_credential_1_1"
      service_credential_2: "my_credential_1_2"
    params:
      param1: "value_1_1"
    group_params:
      param1: "group_1_1"
      param2: "group_1_2"
    shared_params: ["value_s1"]
    shared_group_params: "value_g1"
  test_service_2:
    base_dir: "custom-cloud"
    type: "test/services/02"
    credentials:
      service_credential_1: "my_credential_2_1"
      service_credential_2: "my_credential_2_2"
    params:
      param1: "value_2_1"
    group_params:
      param1: "group_2_1"
      param2: "group_2_2"
    shared_params: ["value_s2"]
    shared_group_params: "value_g2"
  test_service_3:
    base_dir: "custom-cloud"
    type: "test/services/03"
    credentials:
      service_credential_1: "my_credential_3_1"
      service_credential_2: "my_credential_3_2"
    params:
      param1: "value_3_1"
    group_params:
      param1: "group_3_1"
      param2: "group_3_2"
    shared_params: ["value_s3"]
    shared_group_params: "value_g3"
  test_list_1:
    list: true
    services:
      - "test_service_1"
      - "test_service_2"
  test_list_2:
    list: true
    services:
      - name: "test_list_2_list_1"
        key: "test_list_1"
      - name: "test_list_2_service_2"
        key: "test_service_2"
        params:
          param1: "value_overriden_2_1"
        group_params:
          param1: "overriden_group_2_1"
          param2: "overriden_group_2_2"
        shared_params: ["overriden_s2"]
        shared_group_params: "overriden_g2"
  test_list_3:
    list: true
    services:
      - name: "test_list_3_service_2"
        key: "test_service_2"
service_shared_group_params:
  value_g1:
    param1: "shared_1_1"
    param2: "shared_1_2"
    param3: "shared_1_3"
    param4: "shared_1_4"
  overriden_g1:
    param1: "overriden_shared_1_1"
    param2: "overriden_shared_1_2"
    param3: "overriden_shared_1_3"
    param4: "overriden_shared_1_4"
  value_g2:
    param1: "shared_2_1"
    param2: "shared_2_2"
    param3: "shared_2_3"
    param4: "shared_2_4"
  overriden_g2:
    param1: "overriden_shared_2_1"
    param2: "overriden_shared_2_2"
    param3: "overriden_shared_2_3"
    param4: "overriden_shared_2_4"
  value_g3:
    param1: "shared_3_1"
    param2: "shared_3_2"
    param3: "shared_3_3"
    param4: "shared_3_4"
service_shared_params:
  value_s1:
    param1: "value_shared_1_1"
    param2: "value_shared_1_2"
    param3: "value_shared_1_3"
  overriden_s1:
    param1: "value_overriden_shared_1_1"
    param2: "value_overriden_shared_1_2"
    param3: "value_overriden_shared_1_3"
  value_s2:
    param1: "value_shared_2_1"
    param2: "value_shared_2_2"
    param3: "value_shared_2_3"
  overriden_s2:
    param1: "value_overriden_shared_2_1"
    param2: "value_overriden_shared_2_2"
    param3: "value_overriden_shared_2_3"
  value_s3:
    param1: "value_shared_3_1"
    param2: "value_shared_3_2"
    param3: "value_shared_3_3"
service_params:
  group_1_1: "value_group_1_1"
  group_1_2: "value_group_1_2"
  overriden_group_1_1: "value_overriden_group_1_1"
  overriden_group_1_2: "value_overriden_group_1_2"
  shared_1_1: "value_group_shared_1_1"
  shared_1_2: "value_group_shared_1_2"
  shared_1_3: "value_group_shared_1_3"
  shared_1_4: "value_group_shared_1_4"
  overriden_shared_1_1: "value_overriden_group_shared_1_1"
  overriden_shared_1_2: "value_overriden_group_shared_1_2"
  overriden_shared_1_3: "value_overriden_group_shared_1_3"
  overriden_shared_1_4: "value_overriden_group_shared_1_4"
  group_2_1: "value_group_2_1"
  group_2_2: "value_group_2_2"
  overriden_group_2_1: "value_overriden_group_2_1"
  overriden_group_2_2: "value_overriden_group_2_2"
  shared_2_1: "value_group_shared_2_1"
  shared_2_2: "value_group_shared_2_2"
  shared_2_3: "value_group_shared_2_3"
  shared_2_4: "value_group_shared_2_4"
  overriden_shared_2_1: "value_overriden_group_shared_2_1"
  overriden_shared_2_2: "value_overriden_group_shared_2_2"
  overriden_shared_2_3: "value_overriden_group_shared_2_3"
  overriden_shared_2_4: "value_overriden_group_shared_2_4"
  group_3_1: "value_group_3_1"
  group_3_2: "value_group_3_2"
  shared_3_1: "value_group_shared_3_1"
  shared_3_2: "value_group_shared_3_2"
  shared_3_3: "value_group_shared_3_3"
  shared_3_4: "value_group_shared_3_4"
clouds:
  local:
    type: "local"
  custom:
    custom_task: true
    type: "cloud"
    node_type: "node"
    credentials: "fake"
    params:
      x_test_param_1: "test_value_1"
      x_test_param_2: "test_value_2"
      x_test_param_3: "test_value_3"
dns:
  custom:
    custom_task: true
    type: "dns"
    zone: "test.com"
    credentials: "fake"
nodes:
  custom:
    cloud: "custom"
    base_dir: "/var/cloud"
    credentials: "fake_user"
    params:
      instance: {}
      region: {}
      size: {}
  custom_local:
    cloud: "local"
    base_dir: "/var/cloud"
    credentials: "user"
    params:
      instance: {}
      region: {}
      size: {}
tasks:
  custom:
    type: "task"
    custom_task: true
    root: true
    file: "run"
    custom_params:
      param1: "value1"
      param2: "value2"
repos:
  env_base:
    src: "https://github.com/lucasbasquerotto/env-base.git"
    version: "master"
  cloud:
    src: "https://github.com/lucasbasquerotto/ansible-docker.git"
    version: "master"
  custom_cloud:
    src: "https://github.com/lucasbasquerotto/custom-cloud.git"
    version: "master"
  pod:
    src: "https://github.com/lucasbasquerotto/pod.git"
    version: "master"
  custom_pod:
    src: "https://github.com/lucasbasquerotto/custom-pod.git"
    version: "master"
credentials:
  fake: {}
  fake_user:
    host_user: "test"
    host_pass: "123456"
  user:
    host_user: "root"
  my_credential_1_1: "my_secret_1_1"
  my_credential_1_2: "my_secret_1_2"
  my_credential_2_1: "my_secret_2_1"
  my_credential_2_2: "my_secret_2_2"
  my_credential_3_1: "my_secret_3_1"
  my_credential_3_2: "my_secret_3_2"
